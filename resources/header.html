<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
  body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 980px;
    width: 100%;
    margin: 0 auto;
    padding: 45px;
  }
</style>

<script
  type="text/javascript"
  id="MathJax-script"
  src="{{ mathjax-js }}"
></script>

<script type="text/javascript" src="{{ highlight-js }}"></script>

<script type="text/javascript" src="{{ mermaid-js }}"></script>

<script type="text/javascript">
  // Use highlight.js for syntax highlighting on non-mermaid code blocks.
  hljs.configure({ noHighlightRe: /^mermaid$/i });
  hljs.highlightAll();
</script>

<script type="text/javascript">
  mermaid.initialize({
    theme: "{{ mermaid-theme }}",
    startOnLoad: true,
  });
</script>

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", (event) => {
    // Add a "markdown-body" class attribute to the body. We must do this because
    // the GitHub CSS only applies to a div with the "markdown-body" class.
    document.body.classList.add("markdown-body");

    // If there's a stored scroll location, restore it.
    let prevScroll = localStorage.getItem("scrollY");
    if (!isNaN(prevScroll)) {
      window.scroll(0, prevScroll);
      // Sometimes the scroll 'jumps' and doesn't go back to exactly where it
      // should, this seems to (sometimes) fix that by just scrolling the
      // missing distance
      const current = window.scrollY;
      if (prevScroll != current) window.scrollBy(0, prevScroll - current);
    }
  });

  // Save new scroll locations on scroll.
  // See: https://developer.mozilla.org/en-US/docs/Web/API/Document/scroll_event
  let ticking = false;
  document.addEventListener("scroll", (event) => {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        localStorage.setItem("scrollY", window.scrollY);
        ticking = false;
      });
      ticking = true;
    }
  });
</script>
